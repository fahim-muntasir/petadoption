{% extends "petapp/base.html" %}

{% block title %} Create Pet Post {% endblock %}

{% block content %}
    <!-- header  -->
    <div
      class="relative bg-cover bg-center flex items-center justify-center py-10"
      style="background-image: url('/media/image/pexels-helen1-16395147.jpg')"
    >
      <div class="absolute inset-0 bg-[#062d3e] opacity-70"></div>
      <div
        class="relative z-10 bg-[#062d3e] bg-opacity-80 rounded-2xl p-10 shadow-lg max-w-2xl w-full mx-4"
      >
        <div class="flex justify-center mb-12">
          <img
            src="/media/image/logo.png"
            alt="PetAdopt Logo"
            class="w-32 h-24"
          />
        </div>

        <form method="POST" class="space-y-4" enctype="multipart/form-data">
          {% csrf_token %}
          <input
            type="text"
            placeholder="Name"
            name="title"
            class="input-field w-full focus:outline-none focus:ring-2 focus:ring-[#e95b47] h-12 lg:h-14 p-3 rounded-lg border bg-[#fff6e5] border-gray-300 placeholder:font-semibold placeholder:text-[#413d3d]"
            required
          />

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <select name="gender" id="" class="input-field focus:outline-none focus:ring-2 focus:ring-[#e95b47] placeholder:font-semibold placeholder:text-[#413d3d] h-12 lg:h-14 p-3 rounded-lg border bg-[#fff6e5] border-gray-300" >
              <option value="">Select Gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select>
            
            <select name="type" class="input-field focus:outline-none focus:ring-2 focus:ring-[#e95b47] placeholder:font-semibold placeholder:text-[#413d3d] h-12 lg:h-14 p-3 rounded-lg border bg-[#fff6e5] border-gray-300" required >
              <option value="">Select Type</option>
              <option value="cat">Cat</option>
              <option value="dog">Dog</option>
              <option value="bird">Bird</option>
              <option value="fish">Fish</option>
              <option value="rabbit">Rabbit</option>
              <option value="exotic">Exotic Pets</option>
            </select>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <select
                name="division"
                id="division"
                class="input-field focus:outline-none focus:ring-2 focus:ring-[#e95b47] h-12 lg:h-14 p-3 rounded-lg border bg-[#fff6e5] border-gray-300"
                required
            >
                <option value="">Select Division</option>
                {% for item in divisions %}
                    <option value="{{ item.division }}">{{ item.division }}</option>
                {% endfor %}
            </select>
        
            <select
                name="district"
                id="district"
                class="input-field focus:outline-none focus:ring-2 focus:ring-[#e95b47] h-12 lg:h-14 p-3 rounded-lg border bg-[#fff6e5] border-gray-300"
                required
            >
                <option value="">Select District</option>
            </select>
          </div>
        

          <textarea
            placeholder="Description"
            name="description"
            name=""
            id=""
            class="input-field focus:outline-none focus:ring-2 focus:ring-[#e95b47] placeholder:font-semibold w-full placeholder:text-[#413d3d] h-12 lg:h-40 p-3 rounded-lg border bg-[#fff6e5] border-gray-300 resize-none"
            required
          ></textarea>

          <div class="relative">
            <label
              class="input-field flex items-center focus:outline-none focus:ring-2 focus:ring-[#e95b47] placeholder:font-semibold placeholder:text-[#413d3d] h-12 lg:h-14 p-3 rounded-lg border bg-[#fff6e5] border-gray-300 cursor-pointer"
            >
              <i class="fa-solid fa-file-arrow-up text-black text-xl mr-2"></i>
              <span class="text-[#413d3d] font-semibold">Upload Photo</span>
              <input type="file" class="hidden" name="image" required />
            </label>
          </div>

          <div class="text-center mt-6">
            <button
              type="submit"
              class="w-full bg-[#e95b47] text-white py-3 rounded-lg font-semibold hover:bg-[#e66655] transition text-lg"
            >
              Upload
            </button>
          </div>
        </form>
      </div>
    </div>

    <script>
      document.getElementById('division').addEventListener('change', function () {
      const division = this.value;
      const districtSelect = document.getElementById('district');

      // Clear current district options
      districtSelect.innerHTML = '<option value="">Select District</option>';

      if (division) {
        // Fetch districts for the selected division
        fetch(`/get-districts/?division=${division}`)
          .then(response => response.json())
          .then(data => {
              const districts = data.districts;
              districts.forEach(district => {
                  const option = document.createElement('option');
                  option.value = district.district; // Update this based on API response
                  option.textContent = district.district; // Update this based on API response
                  districtSelect.appendChild(option);
              });
          })
          .catch(error => {
              console.error('Error fetching districts:', error);
          });
      }
    })
    </script>
{% endblock %}